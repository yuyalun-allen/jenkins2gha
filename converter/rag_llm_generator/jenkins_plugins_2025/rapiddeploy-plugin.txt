:warning-caption: ⚠️
= RapidDeploy Plugin

image:https://img.shields.io/jenkins/plugin/v/rapiddeploy-jenkins[link="https://plugins.jenkins.io/rapiddeploy-jenkins"]
image:https://img.shields.io/github/v/release/jenkinsci/rapiddeploy-plugin["GitHub release", link="https://github.com/jenkinsci/rapiddeploy-plugin/releases/latest"]
image:https://img.shields.io/github/release-date/jenkinsci/rapiddeploy-plugin?color=blue["GitHub release date", link="https://github.com/jenkinsci/rapiddeploy-plugin/releases/latest"]
image:https://img.shields.io/jenkins/plugin/i/rapiddeploy-jenkins?color=blue[link="https://plugins.jenkins.io/rapiddeploy-jenkins"]
image:https://img.shields.io/github/contributors/jenkinsci/rapiddeploy-plugin?color=blue[link="https://github.com/jenkinsci/rapiddeploy-plugin/graphs/contributors"]

image:https://ci.jenkins.io/job/Plugins/job/rapiddeploy-plugin/job/master/badge/icon[link="https://ci.jenkins.io/job/Plugins/job/rapiddeploy-plugin/job/master/"]
image:https://app.codacy.com/project/badge/Grade/a446a4a74701487abddc8f9aaf29f2e6["Codacy code quality", link="https://www.codacy.com/gh/MidVision/rapiddeploy-jenkins/dashboard"]

===== Developed by

http://www.midvision.com[image:images/logo-dark.png?version=1&modificationDate=1443787671000&api=v2[MidVision Limited], window=_blank]

This plugin provides the best way of taking advantage of all the functionality and benefits of
_https://www.midvision.com/rapiddeploy-overview[RapidDeploy, window=_blank]_ from a
_Jenkins_ job or pipeline. This functionality includes:

* *Deploying a project on _https://www.midvision.com/rapiddeploy-overview[RapidDeploy, window=_blank]_.*
* *Creating a deployment package on _https://www.midvision.com/rapiddeploy-overview[RapidDeploy, window=_blank]_.*
* *Running a job plan on _https://www.midvision.com/rapiddeploy-overview[RapidDeploy, window=_blank]_.*

WARNING: It is strictly necessary the version of _RapidDeploy_ targeted when
using this plugin is 3.3.23 or higher. Some of the features provided may
also require a higher version of _RapidDeploy_ for specific
functionality.

== Steps and actions

=== *_RapidDeploy project deployment_*

Invokes a project deployment on a _RapidDeploy_ server as either a build
step or a post-build action. Multiple deployments can be executed
sequentially or in parallel. You can check the result and the process
logs in the _Jenkins_ build output.

*This task can be used with _RapidDeploy_ 3.3.23 or higher.*

==== Parameters

* *_RapidDeploy_ server URL*: the URL to the _RapidDeploy_ server you
want to connect to, including the protocol (e.g.:
\http://192.168.1.1:8090/MidVision).
* *_RapidDeploy_ authentication token*: the authentication token used to
connect to the _RapidDeploy_ server. It can be generated by the
http://docs.midvision.com/LATEST/reference/tools/web-service-encrypter.html[_MidVision_
encrypter tool, window=_blank].
* *_RapidDeploy_ project name*: the name of the _RapidDeploy_ project
you want to deploy.
* *_RapidDeploy_ project target name*: the _RapidDeploy_ project target
to deploy to (i.e.: SERVER.INSTALLATION.CONFIGURATION).
* *Deployment package name*: the name of the _RapidDeploy_ deployment
package to deploy. Leave this field blank or set it to "LATEST" if you
want to deploy the latest package.
* *Asynchronous job*: this option allows the step to run asynchronously.
The _Jenkins_ job will continue to the next build step immediately
once the project deployment request has been made to _RapidDeploy_. Use
this option to deploy projects in parallel. *Synchronous steps are
supported from RapidDeploy version 3.4.0+*.
* *Show full log*: when checking this option, you will see the entire log
file of the _RapidDeploy_ deployment in the _Jenkins_ job output, if left
unchecked, only a link to the _RapidDeploy_ log file will be printed in
the job output.

==== Data Dictionary

Is it possible to override the data dictionary of a _RapidDeploy_ project by 
using the parameters of a parametrised _Jenkins_ job.

In order to use this feature, the paraemter key needs to be in the same form
of a _RapidDeploy_ data diciontary item key, i.e., using the `@@` string as a
prefix and suffix. For example:

* `@@PARAM_1@@`
* `@@param_one@@`

When you use this specific syntax, the parameter will automatically be
considered a data dictionary item.

[WARNING]
====
For a standard _RapidDeploy_ deployment, the data dictionary is
taken from inside the deployment package version we want to deploy.

When using this feature on _Jenkins_, a new temporary injected package is 
created to be able to override these data dictionary items.

It is important to keep this in mind, because *this means the particular
deployment package version used for the deployment was altered, to override
these data dictionary items, and thus it could provoke inconsistency when
deploying the same deployment package version again, without these data
dicionary items overridden*.
====

=== *_RapidDeploy deployment package creation_*

Invokes a deployment package creation on a _RapidDeploy_ server as
either a build step or a post-build action. You can check the result and
the process logs in the _Jenkins_ build output.

*This task can be used with _RapidDeploy_ 3.4.5 or higher. When using the 
version 3.7 or higher of the plugin it is required to target a _RapidDeploy_ 
version 4.0 or above.*

==== Parameters

* *_RapidDeploy_ server URL*: the URL to the _RapidDeploy_ server you
want to connect to, including the protocol (e.g.:
\http://192.168.1.1:8090/MidVision).
* *_RapidDeploy_ authentication token*: the authentication token used to
connect to the _RapidDeploy_ server. It can be generated by the
http://docs.midvision.com/LATEST/reference/tools/web-service-encrypter.html[_MidVision_
encrypter tool, window=_blank].
* *_RapidDeploy_ project name*: the name of the _RapidDeploy_ project
for which you want to create a new deployment package.
* *Package name*: the name of the _RapidDeploy_ deployment package you
are creating. If not provided, an automatic version incremental name
will be used based on the latest package name.
* *Archive extension*: the extension of the deployment package file to
generate: _jar, war, ear, tar, rar_ or _zip_. It defaults to _jar_.

=== *_RapidDeploy job plan runner_*

Invokes a job plan run on a _RapidDeploy_ server as either a build step
or a post-build action. Multiple job plans can be executed sequentially or
in parallel. You can check the result and the process logs in the _Jenkins_
build output.

*This task can be used with RapidDeploy 3.3.23 or higher.*

==== Parameters

* *_RapidDeploy_ server URL*: the URL to the _RapidDeploy_ server you
want to connect to, including the protocol (e.g.:
\http://192.168.1.1:8090/MidVision).
* *_RapidDeploy_ authentication token*: the authentication token used to
connect to the _RapidDeploy_ server. It can be generated by the
http://docs.midvision.com/LATEST/reference/tools/web-service-encrypter.html[_MidVision_
encrypter tool, window=_blank].
* *_RapidDeploy_ job plan*: the ID of the _RapidDeploy_ job plan you
want to run.
* *Asynchronous job*: this option allows the step to run asynchronously.
The _Jenkins_ job will continue to the next build step immediately
once the job plan run request has been made to _RapidDeploy._ Use this
option to run job plans in parallel. *Synchronous steps are supported
from RapidDeploy version 3.4.0+*.
* *Show individual logs*: this option allows the user to see the logs of all
the individual project deployments included in the job plan.
* *Show full log*: when checking this option, you will see the entire log
file of the _RapidDeploy_ job plan execution in the _Jenkins_ job output, if left
unchecked, only a link to the _RapidDeploy_ log file will be printed in
the job output.

== Jenkins Pipeline Steps

For a deeper explanation of each parameter, please refer to the previous section.

`+rdProjectDeploy:+` invokes a _RapidDeploy_ project deployment.

* `+serverUrl+` +
_RapidDeploy_ server URL.
** *Type:* `+String+`
* `+authToken+` +
_RapidDeploy_ authentication token.
** *Type:* `+String+`
* `+project+` +
_RapidDeploy_ project name.
** *Type:* `+String+`
* `+target+` +
_RapidDeploy_ project target name.
** *Type:* `+String+`
* `+deploymentPackageName+` (optional) +
Deployment package name.
** *Type:* `+String+`
* `+asynchronous+` (optional) +
Asynchronous job.
** *Type:* `+boolean+`
* `+showFullLog+` (optional) +
Show full log.
** *Type:* `+boolean+`
* `+dictionary+` (optional) +
The _RapidDeploy_ project data dictionary.
** *Type:* `+Map+`

This is an example use:

```
rdProjectDeploy serverUrl: "${RD_SERVER_URL}", 
   authToken: "${RD_AUTH_TOKEN}", 
    project: 'CI_Test', 
    target: 'localhost_linux.dev.LocalTest', 
    deploymentPackageName: 'LATEST', 
    asynchronous: false, 
    showFullLog: false,
    dictionary: ["@@INITIAL_BUILD@@":"${env.INITIAL_BUILD}", "@@ANOTHER_BUILD@@":"10.0.0.3"]
```

`+rdPackageBuild:+` invokes a _RapidDeploy_ deployment package creation.

* `+serverUrl+` +
_RapidDeploy_ server URL.
** *Type:* `+String+`
* `+authToken+` +
_RapidDeploy_ authentication token.
** *Type:* `+String+`
* `+project+` +
_RapidDeploy_ project name.
** *Type:* `+String+`
* `+packageName+` (optional) +
Package name.
** *Type:* `+String+`
* `+archiveExtension+` (optional) +
Archive extension.
** *Type:* `+String+`

This is an example use:

```
rdPackageBuild serverUrl: "http://localhost:8090/MidVision", 
    authToken: "bXZhZG1pbjp7X01WQEVOQyNffVdHLzFmNVMreVpRPQ==", 
    project: 'CI_Test', 
    packageName: '', 
    archiveExtension: 'zip'
```

`+rdJobPlanRun+`: invokes a _RapidDeploy_ job plan run.

* `+serverUrl+` +
_RapidDeploy_ server URL.
** *Type:* `+String+`
* `+authToken+` +
_RapidDeploy_ authentication token.
** *Type:* `+String+`
* `+jobPlanId+` +
_RapidDeploy_ job plan ID.
** *Type:* `+int+`
* `+asynchronous+` (optional) +
Asynchronous job.
** *Type:* `+boolean+`
* `+showIndividualLogs+` (optional) +
Show individual logs.
** *Type:* `+boolean+`
* `+showFullLog+` (optional) +
Show full log.
** *Type:* `+boolean+`

This is an example use:

```
rdJobPlanRun serverUrl: "${RD_SERVER_URL}", 
    authToken: "${RD_AUTH_TOKEN}", 
    jobPlanId: 1, 
    asynchronous: false, 
    showIndividualLogs: true, 
    showFullLog: false
```

== Changelog
* https://github.com/jenkinsci/rapiddeploy-plugin/releases[Releases, window=_blank]
* link:./CHANGELOG.adoc[Archive changelog, window=_blank]
